(this.webpackJsonptreecolor=this.webpackJsonptreecolor||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(2),l=n.n(c),a=n(5),o=n.n(a),r=n(3),s=n(1),d=n(6),i=n(7),b=n(10),u=n(8),j=(n(15),function(e,t,n,c){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{label:e+"",level:t,left:null,right:null,parent:l,size:n,color:c,cx:0,cy:0}});function h(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=0,l=Math.pow(2,e-1),a=l*t+(l-1)*t,o=1,d=Object(s.a)(Object(s.a)({},j(c++,o,t,n)),{},{cx:a/2,cy:o*t-t/2}),i=Object(r.a)({},d.label,d),b=[d];b.length;){var u=b.shift();if(u.level+1<=e){var h=Math.pow(2,e-u.level-1)-1,O=(h+1)*t,v=Object(s.a)(Object(s.a)({},j(c++,u.level+1,t,n,u.label)),{},{cx:u.cx-O,cy:u.cy+t});u.left=v.label;var x=Object(s.a)(Object(s.a)({},j(c++,u.level+1,t,n,u.label)),{},{cx:u.cx+O,cy:u.cy+t});u.right=x.label,b.push(v,x),i[v.label]=v,i[x.label]=x}}return i}var O=n(9),v=n(0),x=function(e){var t=e.begin,n=e.end;return Object(v.jsx)("line",{x1:t.cx,y1:t.cy,x2:n.cx,y2:n.cy,stroke:"black"})},f=function(e){var t=e.node,n=e.selected,c=t.cx,l=t.cy,a=t.size,o=t.color,r=t.label,s=a/2-1;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("g",{className:"tree-node",children:[Object(v.jsx)("circle",{className:"tree-node_leaf",strokeWidth:2,stroke:n?"black":o,fill:o,cx:c,cy:l,r:s,"data-node-id":r}),Object(v.jsx)("text",{className:"tree-node_text",x:c,y:l,textAnchor:"middle",alignmentBaseline:"central","data-node-id":r,children:r})]})})},m=function(e){var t=e.nodes,n=e.selectedId,l=e.onNodeSelected,a=e.onNodeMoved,o=Object(c.useState)(null),r=Object(O.a)(o,2),s=r[0],d=r[1],i=Object(c.useCallback)((function(e){e.target.dataset.nodeId&&d({node:e.target.dataset.nodeId,x:e.clientX,y:e.clientY})}),[]),b=Object(c.useCallback)((function(e){d(null)}),[]),u=Object(c.useCallback)((function(e){if(s){var t=e.clientX,n=e.clientY,c=t-s.x,l=n-s.y;d({node:s.node,x:t,y:n}),a(s.node,c,l)}}),[s,a]),j=Object(c.useCallback)((function(e){e.target.dataset.nodeId?l(e.target.dataset.nodeId):l(null)}),[l]),h=Object.values(t),m=h.filter((function(e){return!!e.parent})).map((function(e){var n=t[e.parent];return Object(v.jsx)(x,{begin:n,end:e},e.label)})),p=h.map((function(e){return Object(v.jsx)(f,{node:e,selected:e.label===n},e.label)}));return Object(v.jsxs)("svg",{onClick:j,onMouseDown:i,onMouseUp:b,onMouseMove:u,className:"tree",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[m,p]})},p="#1E90FF",g=["#9370D8",p,"#DAA520","#FFC0CB","#90EE90"],k=function(e){var t=e.depth,n=e.color,l=e.onDepthChanged,a=e.onColorChanged,o=Object(c.useCallback)((function(){l(t+1)}),[l,t]),r=Object(c.useCallback)((function(){l(t-1)}),[l,t]);return Object(v.jsxs)("div",{className:"toolkit",children:[Object(v.jsx)("label",{htmlFor:"depth",children:"\u0413\u043b\u0443\u0431\u0438\u043d\u0430"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{disabled:1===t,onClick:r,children:"-"}),Object(v.jsx)("input",{name:"depth",type:"number",min:1,max:20,value:t,readOnly:!0}),Object(v.jsx)("button",{disabled:20===t,onClick:o,children:"+"})]}),Object(v.jsx)("label",{htmlFor:"color",children:"\u0426\u0432\u0435\u0442"}),Object(v.jsx)("div",{name:"color",children:g.map((function(e){return Object(v.jsx)("div",{style:{backgroundColor:e},className:"toolkit_color ".concat(n===e?"toolkit_color-selected":""),onClick:function(){return a(e)}},e)}))})]})},y=function(e){Object(b.a)(n,e);var t=Object(u.a)(n);function n(e){var c;Object(d.a)(this,n),(c=t.call(this,e)).selectNode=function(e){return c.setState({selected:e})},c.moveNode=function(e,t,n){var l=c.state.nodes[e];if(l){var a=Object(s.a)(Object(s.a)({},c.state.nodes),{},Object(r.a)({},e,Object(s.a)(Object(s.a)({},l),{},{cx:l.cx+t,cy:l.cy+n})));c.setState({nodes:a})}},c.setDepth=function(e){var t=c.state,n=t.color,l=t.selected,a=h(e,25,n);c.setState({selected:a[l]?a[l].label:null,depth:e,nodes:a})},c.setColor=function(e){var t=c.state,n=t.selected,l=t.nodes;if(null!==n){var a=l[n];a&&(c.setState({color:e}),c.animate(e,a.label))}},c.animate=function(e,t){var n=c.state.nodes[t];if(n){var l=Object(s.a)(Object(s.a)({},c.state.nodes),{},Object(r.a)({},t,Object(s.a)(Object(s.a)({},n),{},{color:e})));c.setState({nodes:l},(function(){var t=c.state.nodes[n.parent],l=c.state.nodes[n.left],a=c.state.nodes[n.right];t&&t.color!==e&&setTimeout((function(){return c.animate(e,t.label)}),C()),l&&l.color!==e&&setTimeout((function(){return c.animate(e,l.label)}),C()),a&&a.color!==e&&setTimeout((function(){return c.animate(e,a.label)}),C())}))}};var l=p;return c.state={selected:null,color:l,depth:2,nodes:h(2,25,l)},c}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.color,n=e.depth,c=e.selected,l=e.nodes;return Object(v.jsxs)("div",{className:"app",children:[Object(v.jsx)(k,{color:t,depth:n,onColorChanged:this.setColor,onDepthChanged:this.setDepth}),Object(v.jsx)("div",{className:"tree-wrapper",children:Object(v.jsx)(m,{nodes:l,selectedId:c,onNodeSelected:this.selectNode,onNodeMoved:this.moveNode})})]})}}]),n}(l.a.PureComponent),C=function(){var e=800+401*Math.random();return Math.floor(e)},N=y;n(17);o.a.render(Object(v.jsx)(l.a.StrictMode,{children:Object(v.jsx)(N,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.8cead920.chunk.js.map